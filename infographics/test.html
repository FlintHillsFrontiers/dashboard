<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
            
    <title>Flint Hills Dashboard</title>
    
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Custom CSS -->    
    <link href="http://zachflanders.com/FlintHills/template.css" rel="stylesheet">

    <!-- Mapbox-->
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.css' rel='stylesheet' />
        
    <!-- d3.js-->
    <script src="http://d3js.org/d3.v3.min.js"></script>
	
    <!-- Table Top-->
    <script src='http://zachflanders.com/FlintHills/tabletop.js'></script>
	
</head>

<body>

hello.
<svg class="chart" id="chart"></svg>
<script>
  
window.onload = function() { init2() };
 

var public_spreadsheet_url2 = 'https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=1JsjyHZt5AgJCmC_42X9veNFw6CSaQqPpQCG4Ej5LVB8&output=html';


function init2() {
    Tabletop.init( { key: public_spreadsheet_url2,
                     callback: drawChart,
                     simpleSheet: true } )
  }

var margin = {top: 20, right: 30, bottom: 30, left: 355},
    width = 960 - margin.left - margin.right,
    height = 750 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .range([0, width]);

var y = d3.scale.ordinal()
    .rangeRoundBands([0, height], .1);

var xAxis = d3.svg.axis() 
    .scale(x)
    .orient("bottom")
    .tickSize(-height)
    .tickSubdivide(true);

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var chart = d3.select(".chart")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//Draw the chart using all Flint Hills data

function drawChart(data){
    console.log(data);
    x.domain([0, 4]);
    y.domain(data.map(function(d) { return d.area; }));

  
    chart.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);
    
  
    chart.selectAll(".bar")
        .data(data)
        .enter().append("rect")
        .attr("class", "bar")
        .attr("x", x)
        .attr("y", function(d) { return y(d.area); })
        .attr("width", function(d) { return x(d['2013']); })
        .attr("height", y.rangeBand());
        
    chart.append("g")
        .attr("class", "y axis")
        .call(yAxis);

}

//I actually don't know what this does.      
function type(d) {
    d['2013'] = +d['2013']; // coerce to number
    return d;
}

</script>
</body>
</html>